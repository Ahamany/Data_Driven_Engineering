# API → Pandas Example (Open‑Meteo)

**Выбранный API:** Open‑Meteo (без авторизации, бесплатный)  
**Эндпоинт:** `https://api.open-meteo.com/v1/forecast` с параметром `hourly`  
**Почему этот API:** открыт без ключей, стабилен и возвращает удобный JSON-таймсерии, которые легко преобразуются в табличный формат `pandas`.

## Что делает скрипт
`api_reader.py` запрашивает почасовые погодные данные у Open‑Meteо по заданным координатам, приводит ответ к табличному виду и сохраняет результат в CSV.

- Библиотеки: `requests`, `pandas`
- Выходной файл: `./processed/weather_hourly.csv` (путь можно задать флагом `--out`)
- Колонки датафрейма:
  - `time` — метка времени
  - Далее — выбранные почасовые показатели (например):  
    `temperature_2m`, `relative_humidity_2m`, `wind_speed_10m`, `precipitation`, `cloud_cover` и др.

## Установка и запуск
1. Python 3.10+
2. Установка зависимостей:
   ```bash
   pip install requests pandas
   ```
3. Примеры запуска:
   ```bash
   # По умолчанию: Нью-Йорк, только temperature_2m → processed/weather_hourly.csv
   python3 api_reader.py

   # Москва, несколько показателей, конкретные даты и таймзона
   python3 api_reader.py \
     --latitude 55.7558 --longitude 37.6176 \
     --hourly temperature_2m,relative_humidity_2m,wind_speed_10m \
     --start 2025-11-01 --end 2025-11-02 \
     --timezone Europe/Moscow

   # Санкт-Петербург, осадки и облачность
   python3 api_reader.py \
     --latitude 59.9311 --longitude 30.3609 \
     --hourly precipitation,cloud_cover
   ```

## Параметры CLI
- `--latitude`, `--longitude` — координаты точки наблюдения.
- `--hourly` — список почасовых переменных через запятую (например: `temperature_2m,relative_humidity_2m,wind_speed_10m`). Полный список доступных переменных смотрите в документации Open‑Meteo.
- `--start`, `--end` — опциональные границы дат в формате `YYYY-MM-DD`. Если не заданы, сервис вернёт актуальный прогноз/диапазон по умолчанию.
- `--timezone` — строка часового пояса (например, `Europe/Moscow`) или `auto`, чтобы сервис сам определил таймзону по координатам (значение по умолчанию).
- `--out` — путь к результирующему CSV.

## Примечания
- API не требует ключей и работает без авторизации.
- Если какая-то из запрошенных переменных недоступна, скрипт всё равно создаст столбец с пустыми значениями, сохранив структуру таблицы.
- В терминал выводится краткий превью датафрейма и единицы измерения (`hourly_units`), если они есть в ответе API.
